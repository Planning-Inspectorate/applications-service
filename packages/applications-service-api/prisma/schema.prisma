// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl", "linux-musl-openssl-3.0.x", "linux-musl-arm64-openssl-3.0.x", "windows", "linux-musl-arm64-openssl-1.1.x"]
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model Document {
  id                     Int       @unique @default(autoincrement())
  documentId             String    @id
  caseRef                String?
  representationId       Int?
  documentReference      String?
  version                String?
  examinationRefNo       String?
  filename               String?
  originalFilename       String?
  size                   Int?
  mime                   String?
  documentURI            String?
  path                   String?
  virusCheckStatus       String?
  fileMD5                String?
  dateCreated            String?
  lastModified           String?
  caseType               String?
  documentStatus         String?
  redactedStatus         String?
  publishedStatus        String?
  datePublished          String?
  documentType           String?
  securityClassification String?
  sourceSystem           String?
  origin                 String?
  owner                  String?
  author                 String?
  representative         String?
  description            String?
  stage                  String?
  filter1                String?
  filter2                String?
  createdAt              DateTime? @default(now())
  modifiedAt             DateTime? @default(now())

  @@index([caseRef])
  @@index([representationId])
}

model Representation {
  id                             Int       @unique @default(autoincrement())
  representationId               Int       @id
  caseReference                  String
  caseId                         Int
  referenceId                    String?
  status                         String?
  dateReceived                   DateTime?
  originalRepresentation         String    @db.NVarChar(4000)
  redacted                       Boolean   @default(false)
  redactedRepresentation         String?   @db.NVarChar(4000)
  redactedBy                     String?
  redactedNotes                  String?   @db.NVarChar(4000)
  representationFrom             String?
  representationType             String?
  registerFor                    String?
  // represented person details
  representedFirstName           String?
  representedLastName            String?
  representedUnder18             Boolean?
  representedJobTitle            String?
  representedOrganisationName    String?
  representedContactMethod       String?
  representedEmailAddress        String?
  representedTelephone           String?
  representedAddressLine1        String?
  representedAddressLine2        String?
  representedTown                String?
  representedPostcode            String?
  // representative details
  representativeFirstName        String?
  representativeLastName         String?
  representativeUnder18          Boolean?
  representativeOrganisationName String?
  representativeContactMethod    String?
  representativeEmailAddress     String?
  representativeTelephone        String?
  representativeAddressLine1     String?
  representativeAddressLine2     String?
  representativeTown             String?
  representativePostcode         String?
  hasAttachments                 Boolean?
  createdAt                      DateTime? @default(now())
  modifiedAt                     DateTime? @default(now())

  @@index([caseReference])
}

model Project {
  id                                          Int       @unique @default(autoincrement())
  caseId                                      Int       @unique
  caseReference                               String    @id
  projectName                                 String?
  projectDescription                          String?
  publishStatus                               String?
  sector                                      String?
  projectType                                 String?
  sourceSystem                                String
  stage                                       String?
  projectLocation                             String?
  projectEmailAddress                         String?
  regions                                     String?
  transboundary                               Boolean?
  easting                                     Int?
  northing                                    Int?
  welshLanguage                               Boolean?
  mapZoomLevel                                String?
  secretaryOfState                            String?
  dateProjectAppearsOnWebsite                 DateTime?
  dateOfDCOAcceptance                         DateTime?
  anticipatedDateOfSubmission                 DateTime?
  anticipatedSubmissionDateNonSpecific        String?
  dateOfDCOSubmission                         DateTime?
  dateOfRepresentationPeriodOpen              DateTime?
  dateOfRelevantRepresentationClose           DateTime?
  dateRRepAppearOnWebsite                     DateTime?
  confirmedStartOfExamination                 DateTime?
  dateTimeExaminationEnds                     DateTime?
  stage4ExtensionToExamCloseDate              DateTime?
  stage5ExtensionToRecommendationDeadline     DateTime?
  dateOfRecommendations                       DateTime?
  confirmedDateOfDecision                     DateTime?
  stage5ExtensionToDecisionDeadline           DateTime?
  dateProjectWithdrawn                        DateTime?
  section46Notification                       DateTime?
  datePINSFirstNotifiedOfProject              DateTime?
  screeningOpinionSought                      DateTime?
  screeningOpinionIssued                      DateTime?
  scopingOpinionSought                        DateTime?
  scopingOpinionIssued                        DateTime?
  deadlineForAcceptanceDecision               DateTime?
  dateSection58NoticeReceived                 DateTime?
  preliminaryMeetingStartDate                 DateTime?
  deadlineForCloseOfExamination               DateTime?
  deadlineForSubmissionOfRecommendation       DateTime?
  deadlineForDecision                         DateTime?
  jRPeriodEndDate                             DateTime?
  extensionToDateRelevantRepresentationsClose DateTime?
  examinationTimetableId                      Int?
  createdAt                                   DateTime? @default(now())
  modifiedAt                                  DateTime? @default(now())
}

model ProjectUpdate {
  id                   Int       @unique @default(autoincrement())
  projectUpdateId      Int       @id
  caseReference        String
  updateDate           String
  updateName           String?
  updateContentEnglish String
  updateContentWelsh   String?
  updateStatus         String
  createdAt            DateTime? @default(now())
  modifiedAt           DateTime? @default(now())

  @@index([caseReference])
}
