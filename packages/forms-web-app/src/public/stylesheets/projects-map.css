/* ==========================================================================
   Projects Map Styling (Leaflet, Markers, Popups & Container)
   ========================================================================== */

:root {
	--cluster-bg: #d4351c;
	--cluster-text: white;
	--popup-text: #0b0c0c;
	--popup-link: #1d70b8;
	--popup-link-hover: #003078;
	--popup-border: #b1b4b6;
	--font-family: 'GDS Transport', arial, sans-serif;
}

/* ========================================================================
   Leaflet Popup Styling
   ======================================================================== */

.cluster-popup .leaflet-popup-content-wrapper {
	box-shadow: none;
	border-radius: 2px;
}

.cluster-popup .leaflet-popup-content {
	padding: 0px;
	font-family: var(--font-family);
	line-height: 1.25;
}

/* Popup Content */
.cluster-popup-container {
	min-width: 280px;
}

.cluster-popup-container h2 {
	margin: 0 0 10px 0;
	font-size: 22px;
	font-weight: bold;
	color: var(--popup-text);
}

.cluster-popup-container table {
	width: 100%;
	border-collapse: collapse;
}

.cluster-popup-container tr {
	border-bottom: 1px solid var(--popup-border);
}

.cluster-popup-container tr.cluster-popup-last-row {
	border-bottom: none;
}

.cluster-popup-container tr.cluster-popup-last-row td {
	text-align: left;
}

.cluster-popup-container td {
	padding: 12px 0;
	vertical-align: top;
	border: none;
}

.cluster-popup-container td:first-child {
	padding-right: 20px;
}

.cluster-popup-container td:last-child {
	color: var(--popup-text);
	font-size: 16px;
	text-align: right;
}

.cluster-popup-container a {
	color: var(--popup-link);
	text-decoration: underline;
	font-size: 16px;
}

.cluster-popup-container a:hover {
	color: var(--popup-link-hover);
}

/* ========================================================================
   Marker & Cluster Icon Styling
   ======================================================================== */

.projects-marker-icon {
	width: 12px;
	height: 12px;
	border-radius: 50%;
	border: 2px solid white;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
	font-size: 0;
	padding: 0;
	background-color: var(--cluster-bg);
}

.leaflet-marker-icon.marker-cluster {
	background-color: transparent;
}

.cluster-icon,
.cluster-icon-touch {
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: 50%;
	background: var(--cluster-bg);
	color: var(--cluster-text);
	border: 2px solid white;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
	font-weight: bold;
	font-family: 'GDS Transport', Arial, sans-serif;
}

/* ========================================================================
   Accessibility: Keyboard Navigation & Touch Optimization
   ======================================================================== */

/* Touch device marker optimization (44x44px WCAG AAA) */
.projects-marker-touch .projects-marker-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
}

/* Marker focus indicator (keyboard navigation) */
.leaflet-marker-icon.marker-focused {
	outline: 3px solid #fd0;
	outline-offset: 2px;
	filter: drop-shadow(0 0 4px rgba(253, 208, 0, 0.5));
}

.leaflet-marker-icon[tabindex]:focus {
	outline: 3px solid #fd0;
	outline-offset: 2px;
}

/* Leaflet Control Touch Target Optimization (44x44px WCAG AAA) */
.leaflet-control-zoom a,
.leaflet-control-attribution a {
	min-width: 44px;
	min-height: 44px;
	display: flex;
	align-items: center;
	justify-content: center;
}

@media (hover: none) {
	/* Mobile: Ensure minimum touch target size */
	.leaflet-control-zoom a,
	.leaflet-control-attribution a {
		width: 44px;
		height: 44px;
	}

	/* Add padding to interactive elements */
	.leaflet-control button {
		padding: 8px;
	}
}

/* ========================================================================
   Map Container Styling
   ======================================================================== */

#projects-map {
	min-height: var(--map-height, 450px);
}

@media (min-width: 48.0625em) {
	#projects-map {
		height: var(--map-height, 600px);
	}
}

#projects-map:focus,
#projects-map:focus-visible {
	outline: 3px solid #fd0;
	outline-offset: 2px;
	box-shadow: 0 0 0 3px rgba(253, 208, 0, 0.25);
}

/* ========================================================================
   Motion & Animation Preferences
   ======================================================================== */

@media (prefers-reduced-motion: reduce) {
	* {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}

	/* Leaflet zoom animation */
	.leaflet-zoom-anim {
		animation: none !important;
	}

	/* Leaflet pan animation */
	.leaflet-panning {
		animation: none !important;
	}

	/* Disable marker cluster animations */
	.leaflet-marker-icon {
		transition: none !important;
	}
}
