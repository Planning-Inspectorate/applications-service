{% extends "layouts/layout.njk" %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}

{% block pageTitle %}
  A303 Dewsbury project overview
{% endblock %}

{% block header %}
  <!-- Blank header with no service name for the start page -->
  {{ pinsHeader() }}
{% endblock %}

{% block beforeContent %}

  {% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}
  {{ govukPhaseBanner({
    tag: {
      text: "beta"
    },
    html: 'This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
  }) }}

{% endblock %}

{% set containerClasses = "pins-sidebar--container" %}
{% set hasContentsAside = true %}

{% block contentsAside %}
  <aside class="pins-aside-page-contents">
    <h2 class="govuk-heading-s">Contents</h2>
    <ul class="govuk-list">
      <li><a class="govuk-link" href="/overview/{{ caseRef }}">A404 Dewsbury project information</a></li>
      <li><a class="govuk-link" href="/about-the-application">About the application</a></li>
      <li><strong>All Examination documents</strong></li>
      <li><a class="govuk-link" href="#">Recommendation and decision</a></li>
  </aside>
{% endblock %}

{% block content %}
  <h1 class="govuk-heading-l">A404 Dewsbury</h1>
  <h2 class="govuk-heading-m">All examination information</h2>

  <div class="govuk-grid-row">
    <section class="pins-document-library-search govuk-grid-column-one-quarter">
      <label class="pins-label-small" for="search_documents">Search</label>
      <form action="/document-library/search/{{ caseRef }}/1" method="POST" novalidate>
        <div class="pins-document-library-search-wrapper">
          <input class="search-documents-input" type="text" name="search" id="search_documents">
          <button class="search-documents-submit" type="submit" value="Search">Search</button>
        </div>
      </form>
    </section>

    <section class="documents-results govuk-grid-column-three-quarters">
      {% if typeList.length === 0 %}
        <p class="results"><strong><span id="results-number">{{ pageData.totalItems }}</span>No documents found. Please try with different search text.<strong></p>
          
      {% else %}
        <p class="results"><strong><span id="results-number">{{ pageData.totalItems }}</span> results<strong></p>
          <hr/>
          <div class="document-results-sort">
            <label class="govuk-label" for="document-results-sort">Sort by</span>
            <select id="document-results-sort" class="govuk-select">
              <option selected>Recently updated</option>
            </select>
          </div>
      {% endif %}

      {% for i in range(0, typeList.length) -%}
        <div class="pins-search-results-group">
          <h3 class="pins-search-results-group-heading">{{ typeList[i] }}</h3>
            <div class="pins-search-results-group-items">
              <ul class="govuk-list">
              {% for docs in docList[i] %}
                  <li><a href="{{ docs.path }}">{{ docs.name }}</a></li>
              {% endfor %}
              </ul>
            </div>
        </div>
      {% endfor %}
               
      <div class="pins-search-results-pagination" id="pins-search-results-pagination">
        {% for i in range(1, pageData.totalPages + 1) %}
            {% if pageData.currentPage === i %}
              <a href="/document-library/{{ caseRef }}/{{ i }}" class="govuk-link govuk-link--no-underline">{{ i }}</a>
            {% else %}
              <a href="/document-library/{{ caseRef }}/{{ i }}" class="govuk-link">{{ i }}</a>
            {% endif %}           
        {% endfor %}
      </div> 

    </section>
  </div>  
{% endblock %}

{% block footer %}
  {{ pinsFooter() }}
{% endblock %}
