{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{%- from "govuk/components/tag/macro.njk" import govukTag -%}

{% macro sectionEvents(events) %}
  <ul class="section-events">
    {% for event in events %}
      <li class="section-events__event">
        <div class="section-events__event-header">
          <h3 class="section-events__event-title">
            <strong>{{ event.title }}</strong>
          </h3>

          {% if event.state.tag -%}
            {{ govukTag(event.state.tag) }}
          {%- endif %}
        </div>

        {% if event.description -%}
          <div class="section-events__event-content">
            {{ event.description | safe }}
          </div>
        {%- endif %}

        {% if event.state.isSubmissionOpen -%}
          <div class="section-events__event-content">
            <form method="POST" novalidate>
              {{ govukInput({
                attributes: { "hidden": true },
                name: event.inputId,
                value: event.id
              }) }}

              {{ govukButton({
                classes: "section-events__event-submit",
                text: "Make a submission",
                type: "Submit"
              }) }}
            </form>
          </div>
        {%- endif %}
      </li>
    {% endfor %}
  </ul>
{% endmacro %}
