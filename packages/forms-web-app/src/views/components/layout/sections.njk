{% macro layoutSections(sections) %}
  {% for section in sections %}
    {% if section.active %}
      {% set sectionClasses = "layoutSections__section" %}
      {% if section.hasRule === false %}
        {% set sectionClasses = sectionClasses + ' layoutSections__section--no-rule' %}
      {% endif %}

      {% if section.hasRule %}
        <hr class="layoutSections__hr govuk-section-break govuk-section-break--visible" />
      {% endif %}

      <section class="{{ sectionClasses }}" {% if section.id %}id="{{ section.id }}"{% endif %}>
        {% if section.hasRule === false %}
          <br />
        {% endif %}

        {% if section.title %}
          <h3 class="govuk-heading-m">
            {{ section.title }}
          </h3>
        {% endif %}

        {% if section.content %}
          {{ section.content | safe }}
        {% endif %}
      </section>

      {% if loop.last %}
        <hr class="layoutSections__hr govuk-section-break govuk-section-break--visible" />
      {% endif %}
    {% endif %}
  {% endfor %}
{% endmacro %}
