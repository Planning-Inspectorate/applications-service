{% extends "layouts/layout.njk" %}

{% block pageTitle %}
  {{ projectName }} project overview
{% endblock %}

{% block beforeContent %}
  <div class="project-section">
    <div class="project-header">
      {{ govukPhaseBanner({
        tag: {
          text: "beta"
        },
        html: 'This is a new service â€“ your <a class="govuk-link " href="#">feedback</a> will help us to improve it.'
      })
    }}
      <p class="govuk-heading-xl govuk-!-padding-top-9 govuk-!-padding-bottom-9" >{{ projectName }}</p>
    </div>
  </div>
{% endblock %}

{% block content %}

  <div class="project-header-flex-container">
    <main class="govuk-main-wrapper">
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-one-quarter">
          {% set current = 'about-the-application' %}
          {% include "layouts/vertical-tabs.njk" %}
        </div>
        <div class="govuk-grid-column-half">
          
          <div class="govuk-grid-row">
            <h2 class="govuk-heading-m">Project application documents</h2>
          
              <p class="results">
                <strong>
                  {% if documents %}
                    <span id="results-number">{{ pageData.totalItems }}</span>
                    {% if pageData.totalItems === 1 %}
                      result
                     {% else %}
                      results
                     {% endif %}
                  {% else %}
                    No documents found. Please try with different search text.
                  {% endif %}
                </strong>
              </p>
          </div>
          <div class="govuk-grid-row">
            {% if documents %}
              <p class="results">
                <strong></p>
                <hr/>
                {% for stageDoc in documents | getkeys %}
                  {% for stage in documents[stageDoc] | getkeys %}
                    {% if stage == 1 %}
                      <h2 class="govuk-heading-m">Pre-application documents</h2>
                    {% elseif stage == 2 %}
                      <h2 class="govuk-heading-m">Review of the application documents</h2>
                    {% elseif stage == 3 %}
                      <h2 class="govuk-heading-m">Pre-examination documents</h2>
                    {% endif %}
                    {% for docType in documents[stageDoc][stage] | getkeys %}
                      <div class="pins-search-results-group">
                        <h3 class="pins-search-results-group-heading">{{ docType }}</h3>
                        <div class="pins-search-results-group-items">
                          <ul class="govuk-list">
                            {% for doc in documents[stageDoc][stage][docType] | getkeys %}
                              <li>
                                <a href="{{ documents[stageDoc][stage][docType][doc].path }}" class="govuk-link" target="_blank">{{ documents[stageDoc][stage][docType][doc].path | docname }}</a>
                              </li>
                            {% endfor %}
                          </ul>
                        </div>
                      </div>
                    {% endfor %}
                  {% endfor %}
                {% endfor %}
              {% endif %}
          
            {% if documents %}
              {% if pageData.totalPages !== 1 %}
                <nav class="hmcts-pagination" id="pagination-label">
                  <p class="govuk-visually-hidden" aria-labelledby="pagination-label">Pagination navigation</p>
                  <ul class="hmcts-pagination__list">
                    {% for page in paginationData %}
                      {% if page === 'prev' %}
                        <li class="hmcts-pagination__item  hmcts-pagination__item--prev">
                          <a class="hmcts-pagination__link" href="/examination/{{ caseRef }}/about-the-application/{{ pageData.currentPage - 1 }}">Previous<span class="govuk-visually-hidden"> set of pages</span></a>
                        </li>
                      {% elif page === pageData.currentPage %}
                        <li class="hmcts-pagination__item hmcts-pagination__item--active">{{ page }}</li>
                      {% elif page === 'next' %}
                        <li class="hmcts-pagination__item  hmcts-pagination__item--next">
                          <a class="hmcts-pagination__link" href="/examination/{{ caseRef }}/about-the-application/{{ pageData.currentPage + 1 }}">Next<span class="govuk-visually-hidden"> set of pages</span></a>
                        </li>
                      {% elif page === '...' %}
                        <li class="hmcts-pagination__item hmcts-pagination__item--active">{{ page }}</li>
                      {% else %}
                        <li class="hmcts-pagination__item">
                          <a class="hmcts-pagination__link" href="/examination/{{ caseRef }}/about-the-application/{{ page }}">{{ page }}</a>
                        </li>
                      {% endif %}
                    {% endfor %}
                  </ul>
                  <p class="hmcts-pagination__results">Showing <b>{{ pageData.fromRange }}</b> to <b>{{ pageData.toRange }}</b> of <b>{{ pageData.totalItems }}</b> results</p>
                </nav>
              {% endif %}
            {% endif %}
          </div>  
        </div>
        <div class="govuk-grid-column-one-quarter">
        </div>
      </main>
    </div>
  {% endblock %}