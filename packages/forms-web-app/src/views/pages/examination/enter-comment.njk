{% extends "layouts/default.njk" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}

{% set backLinkUrl = backLinkUrl %}

{% set pageTitle = pageTitle %}

{% block pageTitle %}
	{% if errors %}
		{% set pageTitle = "Error: " + pageTitle %}
	{% endif %}
	{{ pageTitle }}
{% endblock %}

{% block script %}
	{% set initiateScriptsConfig = (initiateScriptsConfig.push({
		callback: "var sanitise = new appScripts.sanitiseForm();
 sanitise.form('form', ['" + id + "']);
		",
 src: "/public/scripts/sanitiseForm.script.js"
	}), initiateScriptsConfig) %}
{% endblock %}

{% block content %}
	{% if errorSummary %}
		{{ govukErrorSummary({
			titleText: "There is a problem",
			errorList: errorSummary
		}) }}
	{% endif %}
	<div class="govuk-grid-row">
		<div class="govuk-grid-column-two-thirds">
			<form action="" method="POST" novalidate>
				<span class="govuk-caption-l">{{ activeSubmissionItemTitle }}</span>

				{{ govukTextarea({
					name: id,
					id: id,
					label: {
						text: title,
						classes: "govuk-label--l",
						isPageHeading: true
					},
					value: comment or errors[id].value,
					errorMessage: errors[id] and {
						text: errors[id].msg
					},
					hint: {
						text: 'Any further information requested by ' + activeSubmissionItemTitle
					}
				}) }}
				{{ govukButton({
					attributes: { "data-cy": "button-submit-and-continue" },
					text: "Continue",
					type: "Submit"
				}) }}
			</form>
		</div>
	</div>

{% endblock %}