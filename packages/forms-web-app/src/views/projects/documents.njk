{% extends "layouts/project-3-columns.njk" %}

{% set activeProjectLink = 'about-the-application' %}

{% block columnTwo %}
    <h2 class="govuk-heading-l">Project application documents</h2>

      <p class="results">
        {% if documents %}
          Showing <b>{{ pageData.fromRange }}</b> to <b>{{ pageData.toRange }}</b> of <b>{{ pageData.totalItems }}</b> documents, newest first.
        {% else %}
          No documents found. Please try with different search text.
        {% endif %}
      </p>

    {% if documents %}
      <ul class="pins-govuk-result-list">
        {% for document in documents %}
          <li class="pins-govuk-result-list__item">
            <a class="govuk-link pins-govuk-result-list__item-title" href="{{ document.path }}"target="_blank">
              {{ document.description or document.personal_name  }} ({{ document.mime | formatMimeType }}, {{ document.size | formatBytes }})
            </a>
            <p class="pins-govuk-result-list__item-description ">
              {% if document.representative %}
                Published by {{ document.representative }} on behalf of {{ document.personal_name }}
              {% elseif document.description and document.personal_name %}
                Published by {{ document.personal_name }}
              {% endif %}
            </p>
            <div class="govuk-grid-row document-metadata">
              <div class="govuk-grid-column-one-third" data-cy="published-date">
                {{ document.date_published }}
              </div>
              <div class="govuk-grid-column-one-third" data-cy="published-stage">
                {{ projectStageNames[document.Stage] }}
              </div>
              <div class="govuk-grid-column-one-third" data-cy="published-title">
                {{ document.filter_1 }}
              </div>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% endif %}

    {% if documents %}
      {% if pageData.totalPages !== 1 %}
        <nav class="moj-pagination" id="pagination-label">
          <p class="govuk-visually-hidden" aria-labelledby="pagination-label">Pagination navigation</p>
          <ul class="moj-pagination__list">
            {% for page in paginationData %}
              {% if page === 'prev' %}
                <li class="moj-pagination__item  moj-pagination__item--prev">
                  <a class="moj-pagination__link" href="/projects/{{ caseRef }}/documents/{{ pageData.currentPage - 1 }}">Previous<span class="govuk-visually-hidden"> set of pages</span></a>
                </li>
              {% elif page === pageData.currentPage %}
                <li class="moj-pagination__item moj-pagination__item--active">{{ page }}</li>
              {% elif page === 'next' %}
                <li class="moj-pagination__item  moj-pagination__item--next">
                  <a class="moj-pagination__link" href="/projects/{{ caseRef }}/documents/{{ pageData.currentPage + 1 }}">Next<span class="govuk-visually-hidden"> set of pages</span></a>
                </li>
              {% elif page === '...' %}
                <li class="moj-pagination__item moj-pagination__item--active">{{ page }}</li>
              {% else %}
                <li class="moj-pagination__item">
                  <a class="moj-pagination__link" href="/projects/{{ caseRef }}/documents/{{ page }}">{{ page }}</a>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
          <p class="moj-pagination__results">Showing <b>{{ pageData.fromRange }}</b> to <b>{{ pageData.toRange }}</b> of <b>{{ pageData.totalItems }}</b> results</p>
        </nav>
      {% endif %}
    {% endif %}
{% endblock %}
