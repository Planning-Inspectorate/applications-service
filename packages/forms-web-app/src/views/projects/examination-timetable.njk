{% extends "components/template/content-sidebar.njk" %}

{% from "govuk/components/accordion/macro.njk" import govukAccordion %}

{% from "components/section/events.njk" import sectionEvents %}
{% from "components/text/heading-summary.njk" import textHeadingSummary %}

{% block script %}
  {% set initiateScriptsConfig = (initiateScriptsConfig.push(
    {
      callback: "window.GOVUKFrontend.initAll();",
      src: "/assets/govuk/all.js"
    }
  ), initiateScriptsConfig) %}
{% endblock %}

{% if events.upcoming.displayEvents %}
  {% set upcomingEventsHtml = sectionEvents(events.upcoming.events) %}
{% else %}
  {% set upcomingEventsHtml = events.upcoming.noEventsHtml %}
{% endif %}

{% if events.past.displayEvents %}
  {% set pastEventsHtml = sectionEvents(events.past.events) %}
{% else %}
  {% set pastEventsHtml = events.past.noEventsHtml %}
{% endif %}

{% block templateHeader  %}
  <h1 class="govuk-heading-xl">
    {{ title }}
  </h1>
{% endblock %}

{% block templateSidebar %}
  {% include "layouts/vertical-tabs.njk" %}
{% endblock %}

{% block templateContent %}
  {{ textHeadingSummary(subtitle) }}

  {% if examination.startDate %}
    <p>{{ examination.startDate }}</p>
  {% endif %}

  {% if examination.closeDate %}
    <p>{{ examination.closeDate }}</p>
  {% endif %}

  {{ govukAccordion({
    items: [
      {
        heading: {
          text: events.upcoming.title
        },
        content: {
          html: upcomingEventsHtml
        }
      },
      {
        heading: {
          text: events.past.title
        },
        content: {
          html: pastEventsHtml
        }
      }
    ]
  }) }}
{% endblock %}
