{% extends "layouts/default.njk" %}

{% set pageTitle = 'Projects map' %}

{% block stylesheet %}
	<link rel="stylesheet" href="/public/stylesheets/leaflet.css">
{% endblock %}

{% block script %}
	{% set initiateScriptsConfig = (initiateScriptsConfig.push(
		{
			callback: "var leafletMap = new appScripts.leaflet.default(); leafletMap.initiate('" + mapAccessToken + "', 'map');",
			src: "/public/scripts/leaflet.script.js"
		}
	), initiateScriptsConfig) %}
{% endblock %}

{% block content %}
	<div class="govuk-grid-row">
		<div class="govuk-grid-column-full-width">
			<h1 class="govuk-heading-xl">
				Projects map
			</h1>

			<p class="govuk-body">
				This is a map of all project boundaries. To find a specific project select a project boundary.
			</p>

			<!-- Search bar placeholder -->
			<div class="govuk-form-group">
				<label class="govuk-label" for="search">
					Search for a project
				</label>
				<input class="govuk-input" id="search" name="search" type="text" placeholder="Enter project name or reference">
			</div>

			<!-- Show filters button placeholder -->
			<button class="govuk-button govuk-button--secondary" data-module="govuk-button">
				Show filters
			</button>

			<!-- Switch to list view link -->
			<p class="govuk-body">
				<a class="govuk-link" href="/project-search">Switch to list view</a>
			</p>

			{% if mapAccessToken %}
				<div id="map" style="height: 550px;"></div>
			{% else %}
				<p class="govuk-body">Map is currently unavailable.</p>
			{% endif %}

			<!-- Warning text -->
			<div class="govuk-warning-text">
				<span class="govuk-warning-text__icon" aria-hidden="true">!</span>
				<strong class="govuk-warning-text__text">
					<span class="govuk-warning-text__assistive">Warning</span>
					Project boundaries shown are for illustrative purposes only. To view the exact boundaries refer to latest relevant plans and drawings.
				</strong>
			</div>

		</div>
	</div>
{% endblock %}
