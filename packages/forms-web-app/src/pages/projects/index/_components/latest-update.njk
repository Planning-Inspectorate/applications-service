{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}

{% macro getLatestUpdate(latestUpdateData, allUpdatesURL, t) %}
  {% if latestUpdateData %}
    {% set bannerHtml %}
      <div class="pins-rte">
        {{ latestUpdateData.content | safe }}
      </div>

      <p class="govuk-body govuk-!-margin-top-4">
        <a class="govuk-notification-banner__link" href="{{ allUpdatesURL }}">{{ t('projectsIndex.latestUpdateBanner.viewAllUpdates') }}</a>.
      </p>
    {% endset %}

    {% set latestUpdateText =  t('projectsIndex.latestUpdateBanner.latestUpdate') %}

    <section>
      {{ govukNotificationBanner({
        titleText: latestUpdateText + " - " + latestUpdateData.date,
        html: bannerHtml
      }) }}
    </section>
  {% endif %}
{% endmacro %}