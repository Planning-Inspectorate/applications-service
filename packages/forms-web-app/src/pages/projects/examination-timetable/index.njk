{% extends "layouts/default.njk" %}

{% from "govuk/components/accordion/macro.njk" import govukAccordion %}
{% from "components/section/events.njk" import sectionEvents %}
{% from "components/text/heading-summary.njk" import textHeadingSummary %}
{% from "components/wrappers/related-guides-wrapper.njk" import relatedGuidesWrapper %}

{% block script %}
	{% set initiateScriptsConfig = (initiateScriptsConfig.push(
		{
			callback: "window.GOVUKFrontend.initAll();",
			src: "/assets/govuk/all.js"
		}
	), initiateScriptsConfig) %}
{% endblock %}

{% if events.upcoming.displayEvents %}
	{% set upcomingEventsHtml = sectionEvents(events.upcoming.events) %}
{% else %}
	{% set upcomingEventsHtml = events.upcoming.noEventsHtml %}
{% endif %}

{% if events.past.displayEvents %}
	{% set pastEventsHtml = sectionEvents(events.past.events) %}
{% else %}
	{% set pastEventsHtml = events.past.noEventsHtml %}
{% endif %}

{% block content %}
	<h1 class="govuk-heading-xl">
		{{ title }}
	</h1>
	<div class="govuk-grid-row">
		<div class="govuk-grid-column-one-third">
			{% set activeId = 'project-examination-timetable' %}
			{% include "projects/components/vertical-tabs-wrapper.njk" %}
		</div>

		<div class="govuk-grid-column-two-thirds">
			{{ textHeadingSummary(subtitle) }}

			{% if examination.startDate %}
				<p>{{ examination.startDate }}</p>
			{% endif %}

			{% if examination.closeDate %}
				<p>{{ examination.closeDate }}</p>
			{% endif %}

			{{ govukAccordion({
				headingLevel: 3,
				id: "examination-timetable-events-accordion",
				items: [
					{
						heading: {
						text: events.upcoming.title
					},
						expanded: true,
						content: {
						html: upcomingEventsHtml
					}
					},
					{
						heading: {
						text: events.past.title
					},
						content: {
						html: pastEventsHtml
					}
					}
				]
			}) }}

			<div class="visible-on visible-on--tablet">
				<hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible ">
			</div>
			{{ relatedGuidesWrapper(featureHideLink, ["visible-on visible-on--tablet"]) }}
		</div>
	</div>
{% endblock %}
